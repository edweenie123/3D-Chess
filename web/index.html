<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400&display=swap" rel="stylesheet">
    <title>3D-Chess</title>
</head>

<body>
    <div id="selec">
        <div class="splashBackground2">
            <div class="splashBackground"></div>
        </div>
        <div class="splashContent">
            <h1 style="text-align:center; margin-bottom:0;">3D-CHESS</h1>
            <h4 style="text-align:center; margin-top:0;">RAUMSCHACH VARIANT</h4>
            <!-- Display game mode options to the user -->
            <h2>GAME MODE</h2>
            <div class="modeContainer">
                <label>
                    <table>
                        <tr>
                            <td>
                                <input id="sel1" type="radio" name="test" value="-1" checked>
                                <div id="rad1" src="img/kd.svg"></div>
                            </td>
                            <td style="padding:0;"><h4>Player vs. Player</h4></td>
                        </tr>
                    </table>
                </label>
                <label>
                    <table>
                        <tr>
                            <td>
                                <input id="sel2" type="radio" name="test" value="0">
                                <div id="rad2" src="img/nd.svg"></div>
                            </td>
                            <td><p>Player vs. Computer (Easy)</p></td>
                        </tr>
                    </table>
                </label>
                <label>
                    <table>
                        <tr>
                            <td>
                                <input id="sel3" type="radio" name="test" value="1">
                                <div id="rad3" src="img/rd.svg"></div>
                            </td>
                            <td><p>Player vs. Computer (Normal)</p></td>
                        </tr>
                    </table>
                </label>
                <label>
                    <table>
                        <tr>
                            <td>
                                <input id="sel4" type="radio" name="test" value="2">
                                <div id="rad4" src="img/qd.svg"></div>
                            </td>
                            <td><p>Player vs. Computer (Hard)</p></td>
                        </tr>
                    </table>
                </label>
            </div>
            <!-- Create a toggle button for the player to choose if they want to play as white and black -->
            <table style="width:100%;">
                <tr>
                    <td><p id="chosenColour">Play as</p></td>
                    <td>
                        <label class="switch">
                            <input id="sel5" type="checkbox">
                            <span class="slider round" id="playerToggle"></span>
                        </label>
                    </td>
                </tr>
            </table>

            <!-- Buttons for the user to start the game or read the rules / history of Raumschach -->
            <center>
                <table>
                    <tr>
                        <td><button type="button" id="submitButton">START</button></td>
                        <td>
                            <button type="button" onclick="window.open('https://www.chessvariants.com/3d.dir/3d5.html', '_blank')">Rules</button>
                        </td>
                    </tr>
                </table>
            </center>
        </div>
    </div>
    <center><div id="board"></div></center>
    <div id="buttonSwapView">
		<center><button type="button" id="swapView" onclick="swapView()">Switch view (2D / 3D)</button></center>
    </div>
    <div id="promotePanel">
        <div id="pieceHolder"></div>
    </div>
    <script type="text/javascript" src="gen/a.out.js"></script>
    <script>
    </script>
    <script type="text/javascript" src="js/board.js"></script>
    <script type="text/javascript" src="js/menu.js"></script>
    <script>
        var board;
        Module.onRuntimeInitialized = _ => {
            board = new Board(window.innerWidth);
            board.renderBoard();
            board.renderPieces();
            //board.changeTurn();
            // setTimeout(board.createPromotionPanel(1, 0, 0, "l"), 1000)
            document.getElementById("board").style.display = "none";
            var menu = new Menu(board);
        };

		var view2d = true; // default is the 2d view of the board
		function swapView() {
			let boardLevel = document.querySelectorAll(".boardLvl");
			let boardPiece = document.querySelectorAll(".chessImg");
			if (view2d == true) {
				// Switch view to 3D view
				view2d = false;
				for (let i = 0; i < boardLevel.length; i++) {
					boardLevel[i].style.display = "inherit";
					boardLevel[i].style.transform = "rotateX(55deg) skew(-20deg)";
					boardLevel[i].style.webkitTransform = "rotateX(55deg) skew(-20deg)";
				}
				for (let i = 0; i < boardPiece.length; i++) {
					boardPiece[i].style.transform = "translate(-75%, -90%) rotateX(-55deg) rotateZ(5deg) skew(20deg) scale3d(1.0, 3.0, 1.0)";
					boardPiece[i].style.webkitTransform = "translate(-75%, -90%) rotateX(-55deg) rotateZ(5deg) skew(20deg) scale3d(1.0, 3.0, 1.0)";
				}
			} else {
				// Switch view to 2D view
				view2d = true;
				for (let i = 0; i < boardLevel.length; i++) {
					boardLevel[i].style.display = "inline-block";
					boardLevel[i].style.transform = "rotateX(0deg) skew(0deg)";
					boardLevel[i].style.webkitTransform = "rotateX(0deg) skew(0deg)";
				}
				for (let i = 0; i < boardPiece.length; i++) {
					boardPiece[i].style.transform = "translate(-50%, -50%)";
					boardPiece[i].style.webkitTransform = "translate(-50%, -50%)";
				}
			}
		}
    </script>
</body>

</html>
